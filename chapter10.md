# Զրույց X։ Գրադարան ստեղծելու մասին

Այս զրույցում ես պատմում եմ, թե ինչպես ստեղծել _դինամիկ_ և _ստատիկ_ գրադարաններ և դրանք օգտագործել ծրագրում։ Եվ քանի որ նպատակս գրադարաններ ստեղծման տեխնիկայի ցուցադրումն է, շատ բարդ բաների հետևից չեմ ընկնի և որպես օրինակ կներկայացնեմ միայն մեկ ֆունկցիա պարունակող գրադարան։ 

Ստեղծեմ `ni.c` (numeric integral) ֆայլը, որը պարունակում է մոտավոր ինտեգրալի հաշվման Սիմպսոնի մեթոդը, թվի բացարձակ արժեքը հաշվող `dabs` ֆունկցիան և `epsilon` հաստատունը, որի օգնությամբ որոշվում է հաշվարկների ճշտությունը։

```c
/**
 * `integral` ֆունկցիան Սիմպսոնի բանաձևով տրված հատվածի վրա 
 * հաշվում է տրված ֆունկցիայի թվային ինտեգրալը։
 */
 
/* մեթոդի ճշտության գործակից */
static const double epsilon = 1e-5;

static double dabs( double v )
{
  return (v < 0 ? -v : v);
}

/* ինտեգրալի հաշվումը «բաժանիր և տիրիր» մոտեցմամբ */
double integral( double(*f)(double), double a, double b )
{
  if( b - a < epsilon )
    return ((b - a) / 6) * (f(a) + 4*f((a+b)/2) + f(b));
  double m = (a + b) / 2.0;
  return integral( f, a, m ) + integral( f, m, b );
}
```

Որպեսզի այս ֆունկցիան հնարավոր լինի օգտագործել այլ ծրագրերում, ստեղծեմ նաև `ni.h` հայտարարությունների ֆայլը։ Այն պարունակելու է միայն `integral` ֆունկցիայի հայտարարությունը։ 

```c
#ifndef NUMERIC_INTEGRAL
#define NUMERIC_INTEGRAL

extern double integral( double(*)(double), double, double );

#endif
```

Ֆունկցիայի հայտարարությունից առաջ գրված `extern` ծառայողական բառն ուզում է ասել, թե `integral` ֆունկցիան սահմանված է մի որևէ այլ տեղ (գուցե հենց նույն ֆայլում)։ 


_{Օգտագործողի ինտերֆեյսը։}_
_{`*.հ` և `*.c` ֆայլեր։}_
_{Առանձին կոմպիլյացիա։}_

